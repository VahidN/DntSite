/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/quill@2.0.3/formats/table.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Block from"../blots/block.js";import Container from"../blots/container.js";class TableCell extends Block{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",tableId()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===TableCell.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class TableRow extends Container{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const e=this.children.head.formats(),t=this.children.tail.formats(),l=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===t.table&&e.table===l.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach((e=>{if(null==e.next)return;const t=e.formats(),l=e.next.formats();if(t.table!==l.table){const t=this.splitAfter(e);t&&t.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class TableBody extends Container{static blotName="table-body";static tagName="TBODY"}class TableContainer extends Container{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(TableRow),t=e.reduce(((e,t)=>Math.max(t.children.length,e)),0);e.forEach((e=>{new Array(t-e.children.length).fill(0).forEach((()=>{let t;null!=e.children.head&&(t=TableCell.formats(e.children.head.domNode));const l=this.scroll.create(TableCell.blotName,t);e.appendChild(l),l.optimize()}))}))}cells(e){return this.rows().map((t=>t.children.at(e)))}deleteColumn(e){const[t]=this.descendant(TableBody);null!=t&&null!=t.children.head&&t.children.forEach((t=>{const l=t.children.at(e);null!=l&&l.remove()}))}insertColumn(e){const[t]=this.descendant(TableBody);null!=t&&null!=t.children.head&&t.children.forEach((t=>{const l=t.children.at(e),a=TableCell.formats(t.children.head.domNode),r=this.scroll.create(TableCell.blotName,a);t.insertBefore(r,l)}))}insertRow(e){const[t]=this.descendant(TableBody);if(null==t||null==t.children.head)return;const l=tableId(),a=this.scroll.create(TableRow.blotName);t.children.head.children.forEach((()=>{const e=this.scroll.create(TableCell.blotName,l);a.appendChild(e)}));const r=t.children.at(e);t.insertBefore(a,r)}rows(){const e=this.children.head;return null==e?[]:e.children.map((e=>e))}}function tableId(){return`row-${Math.random().toString(36).slice(2,6)}`}TableContainer.allowedChildren=[TableBody],TableBody.requiredContainer=TableContainer,TableBody.allowedChildren=[TableRow],TableRow.requiredContainer=TableBody,TableRow.allowedChildren=[TableCell],TableCell.requiredContainer=TableRow;export{TableCell,TableRow,TableBody,TableContainer,tableId};
//# sourceMappingURL=/sm/f7b1041d4bb09bb1b411bf766f8874bd568f98a290ef77e667744fa87348adf8.map