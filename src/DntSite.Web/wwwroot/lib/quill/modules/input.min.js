/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/quill@2.0.3/modules/input.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Delta from"quill-delta";import Module from"../core/module.js";import Quill from"../core/quill.js";import{deleteRange}from"./keyboard.js";const INSERT_TYPES=["insertText","insertReplacementText"];class Input extends Module{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",(e=>{this.handleBeforeInput(e)})),/Android/i.test(navigator.userAgent)||e.on(Quill.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(e){deleteRange({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===e.length)return!1;if(t){const n=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents((new Delta).retain(e.index).insert(t,n),Quill.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,Quill.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!INSERT_TYPES.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||!0===t.collapsed)return;const n=getPlainTextFromInputEvent(e);if(null==n)return;const l=this.quill.selection.normalizeNative(t),i=l?this.quill.selection.normalizedToRange(l):null;i&&this.replaceText(i,n)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function getPlainTextFromInputEvent(e){return"string"==typeof e.data?e.data:e.dataTransfer?.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}export default Input;
//# sourceMappingURL=/sm/d9c97ef9acc905249ce581e39e0e339065625f83a0c3b41faff857e95dc65601.map